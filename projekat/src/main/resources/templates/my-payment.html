<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="help/fragments :: head" />

<body>

    <div th:replace="help/fragments :: nav"></div>

    <!-- Contact Section Begin -->
    <section class="contact-section spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-5">
                    <div class="contact-title">
                        <h4>My Profile</h4>
                    </div>
                </div>
                <div class="col-lg-6">
                    <img src="/images/creditcard.png" style="padding-bottom: 10px;">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-4">
                    <div class="contact-widget">
                        <div class="cw-item" style="padding-left: 0; padding-bottom: 5px;">
                            <div class="card-body text-center">
                                <img src="/images/user.png" width="100" height="100" alt="User" class="rounded-circle mb-3">
                                <h5 class="bold mb-0" th:text="${#strings.capitalize(user.username)}"></h5>
								<small class="text-secondary" th:text="'Last online '+${#dates.format(#dates.createNow(), 'dd.MM.yyyy')}"></small>
							</div>
							<div class="list-group list-group-flush">
								<a th:href="@{/my-profile}" class="list-group-item list-group-item-action"><i class="ti-user mr-3"></i><span th:utext="#{myProfile.profile}"></span></a>
								<a th:href="@{/my-address}" class="list-group-item list-group-item-action"><i class="ti-home mr-3"></i><span th:utext="#{myProfile.address}"></span></a>
								<a th:href="@{/payment-method}" class="list-group-item list-group-item-action active"><i class="ti-credit-card mr-3"></i><span th:utext="#{myProfile.payment}"></span></a>
								<a th:href="@{/my-orders}" class="list-group-item list-group-item-action"><i class="ti-shopping-cart mr-3"></i><span th:utext="#{myProfile.orders}"></span></a>
								<a th:href="@{/logout}" class="list-group-item list-group-item-action"><i class="ti-power-off mr-3"></i><span th:utext="#{myProfile.logout}"></span></a>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-6 offset-lg-1">
					<form th:action="@{/update-payment}" method="POST">
					<div class="contact-widget">
						<div class="cw-item">
							<div class="ci-icon">
								<i class="ti-credit-card"></i>
							</div>
							<div class="ci-text">
								<span th:text="#{myPayment.cardType}"></span>
								<select class="form-control" id="cardType" th:name="type" style="margin-top: 10px; width: 300%;">
									<option value="mastercard" th:selected="${(user?.cardInformation?.type == 'mastercard') ? true : false}">Mastercard</option>
									<option value="visa" th:selected="${(user?.cardInformation?.type == 'visa') ? true : false}">Visa</option>
								</select>
							</div>
						</div>
						<div class="cw-item">
							<div class="ci-icon">
								<i class="ti-user"></i>
							</div>
							<div class="ci-text">
								<span th:text="#{myPayment.cardHolder}"></span>
								<input class="form-control" type="text" th:name="cardHolderName" style="width: 140%;" th:value="${user?.cardInformation?.cardHolderName}">
							</div>
						</div>
						<div class="cw-item">
							<div class="ci-icon">
								<i class="ti-pencil"></i>
							</div>
							<div class="ci-text">
								<span th:text="#{myPayment.cardNumber}"></span>
								<input class="form-control" type="text" th:name="cardNumber" style="width: 140%;" required minlength="12" maxlength="12"
								th:value="${user?.cardInformation?.cardNumber}">
							</div>
						</div>
						<div class="cw-item">
							<div class="row">
							<div class="ci-text">
								<span th:text="#{myPayment.expirationDate}"></span>
							</div>
								</div>
								<div class="row">
								<div class="ci-text">
								<select class="form-control" style="margin-top: 10px; width: 130%;" th:name="expirationMonth">
									<option disabled="disabled">-- Month --</option>
									<option value="1" th:selected="${(user?.cardInformation?.expirationMonth == 1) ? true : false}" th:text="#{myPayment.jan}"></option>
									<option value="2" th:selected="${(user?.cardInformation?.expirationMonth == 2) ? true : false}" th:text="#{myPayment.feb}"></option>
									<option value="3" th:selected="${(user?.cardInformation?.expirationMonth == 3) ? true : false}" th:text="#{myPayment.mar}"></option>
									<option value="4" th:selected="${(user?.cardInformation?.expirationMonth == 4) ? true : false}" th:text="#{myPayment.apr}"></option>
									<option value="5" th:selected="${(user?.cardInformation?.expirationMonth == 5) ? true : false}" th:text="#{myPayment.may}"></option>
									<option value="6" th:selected="${(user?.cardInformation?.expirationMonth == 6) ? true : false}" th:text="#{myPayment.jun}"></option>
									<option value="7" th:selected="${(user?.cardInformation?.expirationMonth == 7) ? true : false}" th:text="#{myPayment.jul}"></option>
									<option value="8" th:selected="${(user?.cardInformation?.expirationMonth == 8) ? true : false}" th:text="#{myPayment.aug}"></option>
									<option value="9" th:selected="${(user?.cardInformation?.expirationMonth == 9) ? true : false}" th:text="#{myPayment.sept}"></option>
									<option value="10" th:selected="${(user?.cardInformation?.expirationMonth == 10) ? true : false}" th:text="#{myPayment.oct}"></option>
									<option value="11" th:selected="${(user?.cardInformation?.expirationMonth == 11) ? true : false}" th:text="#{myPayment.nov}"></option>
									<option value="12" th:selected="${(user?.cardInformation?.expirationMonth == 12) ? true : false}" th:text="#{myPayment.dec}"></option>
								</select>
								</div>
								<div class="ci-text" style="float:right;">
								<select class="form-control" style="margin-top: 10px; margin-left: 40px; width: 155%;" th:name="expirationYear">
									<option disabled="disabled">-- Year --</option>
									<option value="2021" th:selected="${(user?.cardInformation?.expirationYear == 2021) ? true : false}">2021</option>
									<option value="2022" th:selected="${(user?.cardInformation?.expirationYear == 2022) ? true : false}">2022</option>
									<option value="2023" th:selected="${(user?.cardInformation?.expirationYear == 2023) ? true : false}">2023</option>
									<option value="2024" th:selected="${(user?.cardInformation?.expirationYear == 2024) ? true : false}">2024</option>
									<option value="2025" th:selected="${(user?.cardInformation?.expirationYear == 2025) ? true : false}">2025</option>
									<option value="2026" th:selected="${(user?.cardInformation?.expirationYear == 2026) ? true : false}">2026</option>
								</select>
								</div>					
								</div>
							</div>
							<div class="cw-item">
							<div class="ci-icon">
								<i class="ti-credit-card"></i>
							</div>
							<div class="ci-text">
								<span th:text="#{myPayment.cvc}"></span>
								<input type="number" class="form-control" style="width: 150%;" th:name="cvc" required th:value="${user?.cardInformation?.cvc}">
							</div>
						</div>
						</div>
					<div class="row">
						<div class="container" style="padding-top: 30px; width: 50%;">
							<button type="submit" class="site-btn" th:text="#{myPayment.saveBtn}"></button>
						</div>
					</div>
					</form>
				</div>
				</div>
			</div>
	</section>
	<!-- Contact Section End -->

	<div th:replace="help/fragments :: footer"></div>

</body>

</html>